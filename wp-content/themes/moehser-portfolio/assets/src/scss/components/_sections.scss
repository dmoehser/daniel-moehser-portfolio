// Sections
// ========

@use '../utils/tokens';

// Spacing Constants
// -----------------
$spacing-8: 6px;           // Desktop scaling: 8px * 0.75
$spacing-12: 9px;          // Desktop scaling: 12px * 0.75
$spacing-16: 12px;         // Desktop scaling: 16px * 0.75
$spacing-20: 15px;         // Desktop scaling: 20px * 0.75
$spacing-24: 18px;         // Desktop scaling: 24px * 0.75
$spacing-48: 36px;         // Desktop scaling: 48px * 0.75
$spacing-80: 60px;         // Desktop scaling: 80px * 0.75
$spacing-120: 90px;        // Desktop scaling: 120px * 0.75

// Color Constants
// ---------------
$color-dark: #0f172a;
$color-muted: #64748b;
$color-light: #e2e8f0;
$color-light-secondary: #cbd5e1;

// Base styles for all sections
// =============================

// Page scroll container
// ====================

.page-scroll {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  scroll-behavior: smooth;
  scroll-snap-type: y proximity; // Disabled by default for Safari compatibility
  position: relative;
  z-index: 1;
}

.page-scroll > section {
  min-height: 100vh;
  width: 100%;
  scroll-snap-align: start;
  flex: 0 0 auto;
  transition: all 0.3s ease;
  position: relative;
}

// Safari scroll-snap fixes - CSS fallback
// =========================================
@supports (-webkit-appearance: none) {
  .page-scroll {
    scroll-snap-type: none !important;
    -webkit-scroll-snap-type: none !important;
  }
  
  .page-scroll > section {
    scroll-snap-align: none !important;
    scroll-snap-stop: normal !important;
    -webkit-scroll-snap-align: none !important;
    -webkit-scroll-snap-stop: normal !important;
  }
}

// Responsive adjustments for page-scroll
@media (max-width: 1024px) {
  .page-scroll {
    scroll-snap-type: y proximity; // Less strict on mobile
  }
  
  .page-scroll > section {
    min-height: 100vh;
    -webkit-overflow-scrolling: touch; // Mobile compatibility
  }
}

// Base section styles
// ====================

.section-base {
  min-height: 100vh;
  width: 100%;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  background: transparent;
  scroll-snap-align: start;
  scroll-margin-top: $spacing-80; // Account for header height
  position: relative;
  padding: $spacing-120 0 4vh 0; // Stay below menu
  box-sizing: border-box;
  z-index: 1;
}

.section-inner {
  width: min(960px, 92vw);   // Desktop scaling: 1280px * 0.75
  margin: 0 auto;
  padding: $spacing-20 0.9375rem;  // Desktop scaling: 1.25rem * 0.75
  position: relative;
  z-index: 2;
  overflow: visible;
}

.section-card {
  width: 100%;
  margin: 0 auto;
  background: rgba(255,255,255,.95);
  border: 1px solid rgba(15,23,42,.12);
  border-radius: $spacing-16;
  overflow: visible;
  backdrop-filter: blur(7.5px) saturate(140%);  // Desktop scaling: 10px * 0.75
  -webkit-backdrop-filter: blur(7.5px) saturate(140%);
  padding: clamp($spacing-24, 3.5vw, $spacing-48);
  position: relative;
}

.section-header {
  text-align: center;
  margin-bottom: clamp($spacing-12, 2.5vw, $spacing-24);
}

.section-title {
  margin: 0 0 $spacing-8;
  font-size: clamp(2rem, 4vw, 3.2rem);
  font-weight: 900;
  color: $color-dark;
  line-height: 1.1;
}

.section-subtitle {
  margin: 0;
  color: $color-muted;
  font-size: clamp(0.95rem, 1.7vw, 1.15rem);
  font-weight: 600;
}

.section-content {
  width: 100%;
}
.section-loading,
.section-error,
.section-empty {
  text-align: center;
  padding: clamp($spacing-24, 3.5vw, $spacing-48);
  color: $color-muted;
}

// Dark Mode Support
// =================

body.theme-dark .section-card {
  background: rgba(30,41,59,.95);
  border-color: rgba(255,255,255,.12);
  color: $color-light;
}

body.theme-dark .section-title {
  color: $color-light;
}

body.theme-dark .section-subtitle {
  color: $color-light-secondary;
}

body.theme-dark .section-loading,
body.theme-dark .section-error,
body.theme-dark .section-empty {
  color: $color-light-secondary;
}
